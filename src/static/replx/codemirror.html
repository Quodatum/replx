<html>
<head>
<title>codemirror test</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/codemirror.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/addon/fold/foldgutter.css">

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/codemirror.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/mode/xml/xml.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/mode/xquery/xquery.js"></script>
	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/addon/fold/foldcode.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/addon/fold/foldgutter.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/addon/fold/brace-fold.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/addon/fold/xml-fold.js"></script>
	
 <style type="text/css">
    .CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}
  </style>
</head>
<body>
Content
<textarea id="editor">
(:~
 : stylecheck for basex restxq
 : apb aug 2014
 :)
module namespace  stylecheck = 'apb.stylecheck';
import module namespace schematron = 'quodatum.schematron' at "compile.sch/schematron.xqm";

declare variable $stylecheck:rules-base:=fn:resolve-uri("./rules/");
declare variable $stylecheck:errs2xsl:=doc("errs2xsl.xsl");
declare variable $stylecheck:sch:=doc("rules/cases-rules-v2.xsl");
 
(:~
 : @return Annotated copy of posted wordml 
 :)
declare
%rest:path("stylecheck")
%rest:POST("{$wordIn}") 
function  stylecheck:annotate($wordIn){
  let $junk:=fn:trace($wordIn,"------------------------------" )  
  let $errs:=xslt:transform($wordIn, $stylecheck:sch) 
  let $xsl:=xslt:transform($errs, $stylecheck:errs2xsl)
  let $ano:=xslt:transform($wordIn, $xsl)
 
  return $ano
};
</textarea>
After
</body>
  <script type="text/javascript" >
        var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
            lineNumbers: true,
            mode:  "xquery"
        });
    </script>
</html>
